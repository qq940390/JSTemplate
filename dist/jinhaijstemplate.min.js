/*! jinhaijstemplate 2020-04-24 */
"use strict";function _typeof(a){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function _createClass(a,b,c){return b&&_defineProperties(a.prototype,b),c&&_defineProperties(a,c),a}var JinhaiJSTemplate=function(){function a(){_classCallCheck(this,a),this.template="",this.datas={},this.hasLoop=!1,this.mainTemplate="",this.dataName="",this.keyName="",this.indexName=""}return _createClass(a,[{key:"render",value:function(a,b){if("object"!=_typeof(b))return console.log("invalid data"),"";var c=document.getElementById(a);this.template=c?c.innerHTML:a,this.datas=b,this.parseTemplate();var d=[];if(!0===this.hasLoop&&this.datas[this.dataName])for(var e=0;e<this.datas[this.dataName].length;e++)d.push(this.parseLine(this.mainTemplate,this.datas[this.dataName][e]));else this.datas&&d.push(this.parseLine(this.mainTemplate,this.datas));return this.hasLoop?this.template=this.template.replace(/\{\{each\s(\w+)(\sas)?\s(\w+)(\s\w+)\}\}([\s\S]+)\{\{\/each\}\}/i,d.join("")):this.template=d.join(""),this.template=this.parseLine(this.template,this.datas),this.template}},{key:"parseLine",value:function(a,b){var c=!1,d=new RegExp(/\{\{((\w+)\.)?(\w+)\}\}/gi);if(c=a.match(d))for(var e=0;e<c.length;e++){var f=!1;(f=c[e].match(/(\w+)\.(\w+)/i))?f[1]==this.keyName&&(a=a.replace("{{"+f[0]+"}}",b[f[2]])):(f=c[e].match(/(\w+)/i))&&(a=this.datas[f[0]]?a.replace("{{"+f[0]+"}}",this.datas[f[0]]):a.replace("{{"+f[0]+"}}",b[f[0]]))}return a}},{key:"parseTemplate",value:function(){if(!this.template)return!1;var a=!1;(a=this.template.match(/\{\{each\s(\w+)(\sas)?\s(\w+)(\s\w+)\}\}([\s\S]+)\{\{\/each\}\}/i))?(this.hasLoop=!0,this.mainTemplate=a[5],this.dataName=a[1],this.keyName=a[3],this.indexName=a[4]):(this.hasLoop=!1,this.mainTemplate=this.template)}}]),a}();